{"version":3,"sources":["jelli/hackday_environ_manager/routes.cljs"],"mappings":";AAWA,2DAAA,3DAACA,oLAEA,WAAKC;AAAL,AACE,OAAA,qGAAgBA;;AAEnB,yDAAA,zDAACC,qHAEA,iBAAAC,NAAKO;AAAL,AAAA,IAAAN,aAAAD;IAAAE,aAAA,AAAAC,cAAAF;IAAAG,eAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;QAAAE,JAAYI;YAAZN,RAAgBO;AAAhB,AAAA,kDAAA,6DACcA;;AAEf,qBAAA,rBAACC,kFAEA,WAAKD;AAAL,AACE,OAACE,8CAAMC,gCAAeH;;AAEzB,yDAAA,zDAACI,uHAEA,cAAAC,HAAKhB;AAAL,AAAA,IAAAiB,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAASP;gBAAT,AAAAQ,4CAAAD,WAAA,IAAA,vEAAWE;AAAX,AACE,IAAMC,YAAU,AAAA,qGAAgBpB;IAC1BqB,cAAY,AAACC,8CAAsB,AAAA,kGAAcF,WAAWD;AADlE,AAEE,wDAAA,jDAACI,8CAAMvB,0EAAkB,wDAAA,xDAACuB,8CAAMJ,8EAAuBE;;AAE5D,8CAAA,mFAAA,IAAA,mFAAA,GAAA,2CAAA,qDAAA,iEAAA,+GAAA,8DAAA,OAAA,oEAAA,mFAAA,2CAAA,lvBAAKG,ibAIMC,wXAGG;AAAA,AACE,8BAAA,mFAAA,wJAAA,lQAACC;mCARjB,mFAAA,cAAA,2CAAA,qDAAA,2EAAA,8GAAA,8DAAA,uBAAA,oEAAA,mFAAA,2CAAA,hVAWWC,uYAGG;AAAA,AACE,8BAAA,mFAAA,mLAAA,mFAAA,MAAA,MAAA,QAAA,pYAACD;mCAfjB,mFAAA,uBAAA,2CAAA,qDAAA,6FAAA,yGAAA,8DAAA,qBAAA,2FAAA,wDAAA,2CAAA,qDAAA,mFAAA,mDAAA,mFAAA,2GAAA,oEAAA,mFAAA,2CAAA,kEAAA,2CAAA,qDAAA,mFAAA,2EAAA,hsCAkBWE,mMAEKC,2cACoBC,ymBAGtB,WAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;WAAA,AAAAE,4CAAAF,eAAA,lEAAaG;AAAb,AACE,IAAMC,UAAQ,AAACC,gDAAQ,AAAA,yFAAUF;AAAjC,AACE,uBAAA,mFAAA,1GAACT,0PAA2CU;;AAC5C,8BAAA,mFAAA,1GAACV,qRAAwDU;mCA3B3E,mFAAA,qBAAA,2CAAA,qDAAA,0FAAA,gHAAA,8DAAA,qCAAA,mFAAA,WAAA,2CAAA,qDAAA,iFAAA,8HAAA,8DAAA,+BAAA,mFAAA,oBAAA,2CAAA,qDAAA,gFAAA,8HAAA,8DAAA,eAAA,2FAAA,wDAAA,2CAAA,qDAAA,mFAAA,mDAAA,mFAAA,2GAAA,oEAAA,mFAAA,2CAAA,kEAAA,2CAAA,qDAAA,mFAAA,2EAAA,nqEA8BWE,keAIAC,kfAIAC,kNAEKX,2cACoBC,ymBAGtB,WAAAW;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAT,4BAAAS;WAAA,AAAAR,4CAAAQ,eAAA,lEAAaP;AAAb,AACE,IAAMC,UAAQ,AAACC,gDAAQ,AAAA,yFAAUF;AAAjC,AACE,8BAAA,mFAAA,1GAACT,0PAA2CU;GA9C9D,sDA+Ca,WAAAO;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAX,4BAAAW;WAAA,AAAAV,4CAAAU,eAAA,lEAAaT;AAAb,AACE,8BAAA,mFAAA,1GAACT;mCAhDhB,mFAAA,oBAAA,2CAAA,qDAAA,kFAAA,+GAAA,8DAAA,wBAAA,2FAAA,wDAAA,2CAAA,qDAAA,mFAAA,mDAAA,mFAAA,oGAAA,oEAAA,mFAAA,2CAAA,kEAAA,2CAAA,qDAAA,mFAAA,oEAAA,3rCAmDWD,4MAEKI,ocACgBC,kmBAGlB,WAAAe;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAb,4BAAAa;WAAA,AAAAZ,4CAAAY,eAAA,lEAAaX;AAAb,AACE,IAAMY,MAAI,AAAA,kFAAMZ;AAAhB,AACE,8BAAA,mFAAA,1GAACT,kQAA+CqB;;AAElE,AAAKC,8CACH,iGAAA,2CAAA,qDAAA,2CAAA,5OAACC,qDACAzB,mPACkBK;AAErB,mDAAA,nDAAMqB,8GAAa/B;AAAnB,AACE,oBAAMA;AAAN,AACE,8BAAA,mFAAA,1GAACO,wKAA8BP;;AADjC;;;AAGF,yDAAA,zDAAMgC;AAAN,AACE,YAAA,ZAACC;;AACD,qIAAA,2CAAA,sEAAA,/OAACC,iCAAWL,4CAAOE","names":["re_frame.core.reg_sub","db","re_frame.core.reg_event_fx","p__71379","vec__71380","seq__71381","cljs.core/seq","first__71382","cljs.core/first","cljs.core/next","_cofx","_","route","re-frame.core/reg-fx","cljs.core.apply","reitit.frontend.easy/push-state","re_frame.core.reg_event_db","p__71383","vec__71384","cljs.core.nth","new-match","old-match","controllers","reitit.frontend.controllers/apply-controllers","cljs.core.assoc","jelli.hackday-environ-manager.routes/routes","jelli.hackday-environ-manager.views/environment-dashboard","re-frame.core/dispatch","jelli.hackday-environ-manager.views/deployment-dashboard","jelli.hackday-environ-manager.views/deployment-page","reitit.coercion.malli/coercion","cljs.core/string?","p__71390","map__71391","cljs.core/--destructure-map","cljs.core.get","path","project","cljs.core.keyword","jelli.hackday-environ-manager.views/techops-link-edit-page","jelli.hackday-environ-manager.project-management.views/project-list-page","jelli.hackday-environ-manager.project-management.views/project-edit-page","p__71392","map__71393","p__71394","map__71395","p__71397","map__71398","env","jelli.hackday-environ-manager.routes/router","reitit.frontend.router","jelli.hackday-environ-manager.routes/on-navigate","jelli.hackday-environ-manager.routes/init-routes!","js/console.log","reitit.frontend.easy/start!"],"sourcesContent":["(ns jelli.hackday-environ-manager.routes\n  (:require\n   [re-frame.core :as re-frame]\n   [reitit.coercion.malli]\n   [reitit.frontend]\n   [reitit.frontend.easy :as rfe]\n   [reitit.frontend.controllers :as rfc]\n   [jelli.hackday-environ-manager.views :as views]\n   [jelli.hackday-environ-manager.project-management.views :as project-views]\n   [jelli.hackday-environ-manager.events :as events]))\n\n(re-frame/reg-sub\n :current-route\n (fn [db]\n   (:current-route db)))\n\n(re-frame/reg-event-fx\n :navigate\n (fn [_cofx [_ & route]]\n   {:navigate! route}))\n\n(re-frame/reg-fx\n :navigate!\n (fn [route]\n   (apply rfe/push-state route)))\n\n(re-frame/reg-event-db\n :navigated\n (fn [db [_ new-match]]\n   (let [old-match (:current-route db)\n         controllers (rfc/apply-controllers (:controllers old-match) new-match)]\n     (assoc db :current-route (assoc new-match :controllers controllers)))))\n\n(def routes\n  [\"/\"\n   [\"\"\n    {:name :routes/home\n     :view views/environment-dashboard\n     :link-text \"Home\"\n     :controllers\n     [{:start (fn []\n                (re-frame/dispatch [::events/select-environment \"dev\"]))}]}]\n   [\"deployments\"\n    {:name :routes/deployment\n     :view views/deployment-dashboard\n     :link-text \"Deployment Dashboard\"\n     :controllers\n     [{:start (fn []\n                (re-frame/dispatch [::events/gather-deployments-version-data [\"dev\" \"int\" \"stage\" \"prod\"]]))}]}]\n   [\"deployments/:project\"\n    {:name :routes/project-deployment\n     :view views/deployment-page\n     :link-text \"Project Deployment\"\n     :coercion  reitit.coercion.malli/coercion\n     :params {:path [:map [:project string?]]}\n     :controllers\n     [{:parameters {:path [:project]}\n       :start (fn [{:keys [path]}]\n                (let [project (keyword (:project path))]\n                  (re-frame/dispatch [::events/select-project project])\n                  (re-frame/dispatch [::events/gather-project-version-data project])))}]}]\n   [\"techops-links/edit\"\n    {:name :routes/techops-link-edit\n     :view views/techops-link-edit-page\n     :link-text \"Edit Techops Links\"}]\n   [\"projects\"\n    {:name :routes/project-list\n     :view project-views/project-list-page\n     :link-text \"Project List\"}]\n   [\"projects/:project\"\n    {:name :routes/project-edit\n     :view project-views/project-edit-page\n     :link-text \"Project Edit\"\n     :coercion  reitit.coercion.malli/coercion\n     :params {:path [:map [:project string?]]}\n     :controllers\n     [{:parameters {:path [:project]}\n       :start (fn [{:keys [path]}]\n                (let [project (keyword (:project path))]\n                  (re-frame/dispatch [::events/select-project project])))\n       :stop (fn [{:keys [path]}]\n               (re-frame/dispatch [::events/deselect-project]))}]}]\n   [\"environments/:env\"\n    {:name :routes/env-dashboard\n     :view views/environment-dashboard\n     :link-text \"Environment Dashboard\"\n     :coercion  reitit.coercion.malli/coercion\n     :params {:path [:map [:env string?]]}\n     :controllers\n     [{:parameters {:path [:env]}\n       :start (fn [{:keys [path]}]\n                (let [env (:env path)]\n                  (re-frame/dispatch [::events/select-environment env])))}]}]])\n\n(def router\n  (reitit.frontend/router\n   routes\n   {:data {:coercion reitit.coercion.malli/coercion}}))\n\n(defn on-navigate [new-match]\n  (when new-match\n    (re-frame/dispatch [:navigated new-match])))\n\n(defn init-routes! []\n  (js/console.log \"initializing routes\")\n  (rfe/start! router on-navigate {:use-fragment true}))\n    \n"]}